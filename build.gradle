apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: 'pmd'
apply plugin: 'com.github.johnrengelman.shadow'

group = projectGroup
version = buildVersion
sourceCompatibility = sourceComp

buildscript {
	repositories {
		jcenter()
	}
	dependencies {
		classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.2'
	}
}

jar {
	manifest {
		attributes 'Main-Class': projectMainClass
	}
}

test {
	testLogging.showStandardStreams = false
}

pmd {
	ignoreFailures = true
}

task fatJar(type: Jar) {
	manifest {
		attributes 'Implementation-Version': version, 'Main-Class': projectMainClass
	}
	baseName = project.name + '-all'
	from {
		configurations.compile.collect {
			it.isDirectory() ? it : zipTree(it)
		}
	}
	with jar
}

repositories {
	mavenCentral()
}

dependencies {
	compile project(':data-struct')
	compile project(':hibernate-orm:hibernate-core')
	compile project(':hibernate-orm:hibernate-java8')
	compile project(':hibernate-orm:hibernate-c3p0')
	compile group: 'org.javassist', name: 'javassist', version: '3.20.0-GA'
	compile group: 'org.xerial', name: 'sqlite-jdbc', version: '3.8.11.2'
	compile group: 'args4j', name: 'args4j', version: '2.32'
	testCompile group: 'junit', name: 'junit', version: '4.12'
}
